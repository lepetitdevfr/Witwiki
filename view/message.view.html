<hr>
<div>
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a id="newMessageTab" href data-target="#newMessage" aria-controls="newMessage" role="tab" data-toggle="tab">Nouveau message</a></li>
        <li role="presentation"><a href data-target="#recu" aria-controls="recu" role="tab" data-toggle="tab">Message reçu <span class="badge">{{vm.messagesIn.length}}</span></a></li>
        <li role="presentation"><a href data-target="#envoye" aria-controls="envoye" role="tab" data-toggle="tab">Message envoyé <span class="badge">{{vm.messagesOut.length}}</a></li>
        </ul>

        <div class="tab-content">
            <div role="tabpanel" class="tab-pane active" id="newMessage">

                <hr>

                <div class="form-group">
                    <label for="title">Titre</label>
                    <input class="form-control" ng-model="vm.title" type="text" id="title" name="title" value="">
                </div>

                <div class="form-group">
                    <label for="dest">Déstinataire</label>
                    <select class="form-control" ng-options="dest.id as dest.pseudo for dest in vm.dests" id="dest" ng-model="vm.dest" name=""></select>
                </div>

                <div class="form-group">
                    <label for="message">Message</label>
                    <textarea class="form-control" id="message" ng-model="vm.message"></textarea>
                </div>

                <button type="submit" name="button" ng-click="vm.newMessage()" class="btn btn-default">Envoyer</button>
                <button type="submit" name="button" ng-click="vm.new()" class="btn btn-danger pull-right">Nouveau</button>
            </div>

            <div role="tabpanel" class="tab-pane" id="recu">

                <hr>

                <div ng-repeat="message in vm.messagesIn" class="panel panel-default">
                    <div class="panel-heading"><a href="javascript:void(0)" ng-click="vm.readMessage(message.id)"><span ng-show="!message.lu" class="badge">Non lu</span></a>&nbsp;{{message.title}}<span class="text-muted  pull-right"><strong><i class="fa fa-user-o  fa" aria-hidden="true"></i>&nbsp;{{message.pseudo}}</strong> <i class="fa fa-calendar  fa" aria-hidden="true"></i>&nbsp;{{message.date |date:'medium'}}</span></div>
                    <div class="panel-body">
                        {{message.content}}
                        <a ng-click="vm.reply(message)" onclick="redirect()" class="btn btn-default btn-xs pull-right">Répondre</a>
                    </div>

                </div>
                <div ng-show="!vm.messagesIn.length">Pas de message</div>
            </div>

            <div role="tabpanel" class="tab-pane" id="envoye">
                <hr>
                <div ng-repeat="message in vm.messagesOut" class="panel panel-default">
                    <div class="panel-heading">{{message.title}}</span><span class="text-muted  pull-right"><strong><i class="fa fa-user-o  fa" aria-hidden="true"></i>&nbsp;{{message.pseudo}}</strong> <i class="fa fa-calendar  fa" aria-hidden="true"></i>&nbsp;{{message.date |date:'medium'}}</span></div>
                    <div class="panel-body">
                        {{message.content}}
                    </div>
                </div>
                <div ng-show="!vm.messagesOut.length">Pas de message</div>
            </div>
        </div>
    </div>


    <script type="text/javascript">
    function redirect() {
        console.log("fds");
        $('#newMessageTab').tab('show');
    }
    </script>
